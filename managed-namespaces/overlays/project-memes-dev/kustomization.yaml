apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: project-memes-dev
bases:
- ../../base

# Patches are edits to make to a set of one or more targets
patches:
# This patch targets the Namespace resource and changes the
# value of metadata.name to "project-memes-dev"
- target:
    kind: Namespace
    name: for-replacement
  patch: |-
    - op: replace
      path: /metadata/name
      value: project-memes-dev

- target:
    kind: RoleBinding
    name: memes-editors
  patch: |-
    - op: replace
      path: /subjects/0/name
      value: user2
    - op: replace
      path: /subjects/0/namespace
      value: project-memes-dev
#    - op: replace
#      path: /metadata/namespace
#      value: project-memes-dev

